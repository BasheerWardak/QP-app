<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Event Creation - Super Scheduler</title>
    <link rel="stylesheet" href="../css/main.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fsupersche6116back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.8"></script>
</head>
<body class="bg-background min-h-screen">
    <!-- Header Navigation -->
    <header class="bg-surface border-b border-slate-200 shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo and Brand -->
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <svg class="w-8 h-8 text-primary" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
                        </svg>
                        <h1 class="text-xl font-semibold text-text-primary">Super Scheduler</h1>
                    </div>
                </div>

                <!-- Navigation Menu -->
                <nav class="hidden md:flex items-center space-x-6">
                    <a href="calendar_dashboard.html" class="text-text-secondary hover:text-primary px-3 py-2 rounded-md hover:bg-slate-50 transition-colors">
                        <i class="fas fa-calendar-alt mr-2"></i>Dashboard
                    </a>
                    <a href="event_creation.html" class="text-primary font-medium px-3 py-2 rounded-md bg-primary-50">
                        <i class="fas fa-plus mr-2"></i>Create Event
                    </a>
                    <a href="task_management.html" class="text-text-secondary hover:text-primary px-3 py-2 rounded-md hover:bg-slate-50 transition-colors">
                        <i class="fas fa-tasks mr-2"></i>Tasks
                    </a>
                    <a href="search_and_filter.html" class="text-text-secondary hover:text-primary px-3 py-2 rounded-md hover:bg-slate-50 transition-colors">
                        <i class="fas fa-search mr-2"></i>Search
                    </a>
                    <a href="settings_and_preferences.html" class="text-text-secondary hover:text-primary px-3 py-2 rounded-md hover:bg-slate-50 transition-colors">
                        <i class="fas fa-cog mr-2"></i>Settings
                    </a>
                </nav>

                <!-- Mobile Menu Button -->
                <button class="md:hidden p-2 rounded-md text-text-secondary hover:text-primary hover:bg-slate-50" onclick="toggleMobileMenu()">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>

            <!-- Mobile Navigation Menu -->
            <div id="mobileMenu" class="md:hidden hidden border-t border-slate-200 py-4">
                <div class="flex flex-col space-y-2">
                    <a href="calendar_dashboard.html" class="text-text-secondary hover:text-primary px-3 py-2 rounded-md hover:bg-slate-50 transition-colors">
                        <i class="fas fa-calendar-alt mr-2"></i>Dashboard
                    </a>
                    <a href="event_creation.html" class="text-primary font-medium px-3 py-2 rounded-md bg-primary-50">
                        <i class="fas fa-plus mr-2"></i>Create Event
                    </a>
                    <a href="task_management.html" class="text-text-secondary hover:text-primary px-3 py-2 rounded-md hover:bg-slate-50 transition-colors">
                        <i class="fas fa-tasks mr-2"></i>Tasks
                    </a>
                    <a href="search_and_filter.html" class="text-text-secondary hover:text-primary px-3 py-2 rounded-md hover:bg-slate-50 transition-colors">
                        <i class="fas fa-search mr-2"></i>Search
                    </a>
                    <a href="settings_and_preferences.html" class="text-text-secondary hover:text-primary px-3 py-2 rounded-md hover:bg-slate-50 transition-colors">
                        <i class="fas fa-cog mr-2"></i>Settings
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <!-- Page Header -->
        <div class="mb-8">
            <div class="flex items-center justify-between">
                <div>
                    <h2 class="text-3xl font-semibold text-text-primary">Create New Event</h2>
                    <p class="text-text-secondary mt-1">Add a new event to your calendar with detailed customization options</p>
                </div>
                <div class="flex items-center space-x-2 text-sm text-text-secondary">
                    <i class="fas fa-keyboard"></i>
                    <span>Ctrl+S to save</span>
                </div>
            </div>
        </div>

        <!-- Creation Mode Toggle -->
        <div class="mb-6">
            <div class="flex items-center space-x-2 bg-slate-100 rounded-lg p-1 w-fit">
                <button onclick="toggleCreationMode('quick')" id="quickModeBtn" class="mode-btn active px-4 py-2 text-sm font-medium rounded-md transition-colors">
                    <i class="fas fa-bolt mr-2"></i>Quick Create
                </button>
                <button onclick="toggleCreationMode('detailed')" id="detailedModeBtn" class="mode-btn px-4 py-2 text-sm font-medium rounded-md transition-colors">
                    <i class="fas fa-cogs mr-2"></i>Detailed Create
                </button>
            </div>
        </div>

        <!-- Event Creation Form -->
        <form id="eventForm" class="space-y-6" onsubmit="createEvent(event)">
            <!-- Primary Form Section -->
            <div class="card p-6">
                <h3 class="text-lg font-semibold text-text-primary mb-4 flex items-center">
                    <i class="fas fa-edit text-primary mr-2"></i>
                    Event Details
                </h3>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Left Column -->
                    <div class="space-y-4">
                        <!-- Event Title -->
                        <div>
                            <label for="eventTitle" class="block text-sm font-medium text-text-primary mb-2">
                                Event Title <span class="text-error">*</span>
                            </label>
                            <input type="text" id="eventTitle" name="title" class="form-input" placeholder="Enter event title" required oninput="validateForm()" />
                            <div id="titleError" class="text-error text-xs mt-1 hidden">Event title is required</div>
                        </div>

                        <!-- Start Date & Time -->
                        <div class="grid grid-cols-2 gap-3">
                            <div>
                                <label for="startDate" class="block text-sm font-medium text-text-primary mb-2">
                                    Start Date <span class="text-error">*</span>
                                </label>
                                <input type="date" id="startDate" name="startDate" class="form-input" value="2025-09-30" required onchange="checkConflicts(); validateForm()" />
                            </div>
                            <div>
                                <label for="startTime" class="block text-sm font-medium text-text-primary mb-2">
                                    Start Time <span class="text-error">*</span>
                                </label>
                                <input type="time" id="startTime" name="startTime" class="form-input" value="09:00" required onchange="checkConflicts(); validateForm()" />
                            </div>
                        </div>

                        <!-- End Date & Time -->
                        <div class="grid grid-cols-2 gap-3">
                            <div>
                                <label for="endDate" class="block text-sm font-medium text-text-primary mb-2">
                                    End Date <span class="text-error">*</span>
                                </label>
                                <input type="date" id="endDate" name="endDate" class="form-input" value="2025-09-30" required onchange="checkConflicts(); validateForm()" />
                            </div>
                            <div>
                                <label for="endTime" class="block text-sm font-medium text-text-primary mb-2">
                                    End Time <span class="text-error">*</span>
                                </label>
                                <input type="time" id="endTime" name="endTime" class="form-input" value="10:00" required onchange="checkConflicts(); validateForm()" />
                            </div>
                        </div>
                        <div id="timeError" class="text-error text-xs hidden">End time must be after start time</div>
                    </div>

                    <!-- Right Column -->
                    <div class="space-y-4">
                        <!-- Category Selection -->
                        <div>
                            <label for="eventCategory" class="block text-sm font-medium text-text-primary mb-2">
                                Category
                            </label>
                            <div class="relative">
                                <select id="eventCategory" name="category" class="form-input pr-10" onchange="updateCategoryPreview()">
                                    <option value="work" data-color="blue">Work</option>
                                    <option value="personal" data-color="green">Personal</option>
                                    <option value="health" data-color="red">Health</option>
                                    <option value="social" data-color="purple">Social</option>
                                    <option value="education" data-color="yellow">Education</option>
                                    <option value="finance" data-color="indigo">Finance</option>
                                </select>
                                <div id="categoryPreview" class="absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 bg-blue-500 rounded-full"></div>
                            </div>
                        </div>

                        <!-- All Day Toggle -->
                        <div class="flex items-center space-x-3">
                            <input type="checkbox" id="allDay" name="allDay" class="w-4 h-4 text-primary" onchange="toggleAllDay()" />
                            <label for="allDay" class="text-sm font-medium text-text-primary">All Day Event</label>
                        </div>

                        <!-- Location -->
                        <div>
                            <label for="eventLocation" class="block text-sm font-medium text-text-primary mb-2">
                                Location
                            </label>
                            <input type="text" id="eventLocation" name="location" class="form-input" placeholder="Enter event location" />
                        </div>

                        <!-- Description -->
                        <div>
                            <label for="eventDescription" class="block text-sm font-medium text-text-primary mb-2">
                                Description
                            </label>
                            <textarea id="eventDescription" name="description" class="form-input" rows="3" placeholder="Add event description..."></textarea>
                        </div>
                    </div>
                </div>

                <!-- Conflict Detection Alert -->
                <div id="conflictAlert" class="mt-4 p-4 bg-error-100 border border-error-200 rounded-lg hidden">
                    <div class="flex items-start space-x-3">
                        <i class="fas fa-exclamation-triangle text-error mt-0.5"></i>
                        <div>
                            <h4 class="text-sm font-medium text-error">Schedule Conflict Detected</h4>
                            <p class="text-sm text-error-600 mt-1">This event overlaps with existing events:</p>
                            <ul id="conflictList" class="text-sm text-error-600 mt-2 list-disc list-inside">
                                <!-- Conflicts will be populated here -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Advanced Options Panel -->
            <div id="advancedOptions" class="card p-6 hidden">
                <h3 class="text-lg font-semibold text-text-primary mb-4 flex items-center">
                    <i class="fas fa-cogs text-secondary mr-2"></i>
                    Advanced Options
                </h3>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Left Column -->
                    <div class="space-y-4">
                        <!-- Recurrence Pattern -->
                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-2">
                                Repeat Event
                            </label>
                            <select id="recurrencePattern" name="recurrence" class="form-input" onchange="toggleRecurrenceOptions()">
                                <option value="none">Does not repeat</option>
                                <option value="daily">Daily</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                                <option value="yearly">Yearly</option>
                                <option value="custom">Custom</option>
                            </select>
                        </div>

                        <!-- Recurrence End -->
                        <div id="recurrenceEnd" class="hidden">
                            <label class="block text-sm font-medium text-text-primary mb-2">
                                End Repeat
                            </label>
                            <div class="space-y-2">
                                <label class="flex items-center space-x-2">
                                    <input type="radio" name="recurrenceEnd" value="never" checked class="w-4 h-4 text-primary" />
                                    <span class="text-sm text-text-primary">Never</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="radio" name="recurrenceEnd" value="date" class="w-4 h-4 text-primary" />
                                    <span class="text-sm text-text-primary">On</span>
                                    <input type="date" class="form-input text-sm flex-1" disabled />
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="radio" name="recurrenceEnd" value="count" class="w-4 h-4 text-primary" />
                                    <span class="text-sm text-text-primary">After</span>
                                    <input type="number" class="form-input text-sm w-16" min="1" value="10" disabled />
                                    <span class="text-sm text-text-primary">occurrences</span>
                                </label>
                            </div>
                        </div>

                        <!-- Time Zone -->
                        <div>
                            <label for="timeZone" class="block text-sm font-medium text-text-primary mb-2">
                                Time Zone
                            </label>
                            <select id="timeZone" name="timeZone" class="form-input">
                                <option value="America/New_York">Eastern Time (ET)</option>
                                <option value="America/Chicago">Central Time (CT)</option>
                                <option value="America/Denver">Mountain Time (MT)</option>
                                <option value="America/Los_Angeles" selected>Pacific Time (PT)</option>
                                <option value="UTC">UTC</option>
                            </select>
                        </div>
                    </div>

                    <!-- Right Column -->
                    <div class="space-y-4">
                        <!-- Reminder Settings -->
                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-2">
                                Reminders
                            </label>
                            <div id="reminderList" class="space-y-2">
                                <div class="flex items-center space-x-2 reminder-item">
                                    <select class="form-input flex-1 text-sm">
                                        <option value="15">15 minutes before</option>
                                        <option value="30">30 minutes before</option>
                                        <option value="60">1 hour before</option>
                                        <option value="1440">1 day before</option>
                                        <option value="10080">1 week before</option>
                                    </select>
                                    <button type="button" onclick="removeReminder(this)" class="p-2 text-error hover:bg-error-100 rounded-md transition-colors">
                                        <i class="fas fa-trash text-sm"></i>
                                    </button>
                                </div>
                            </div>
                            <button type="button" onclick="addReminder()" class="mt-2 text-sm text-primary hover:text-primary-700 font-medium">
                                <i class="fas fa-plus mr-1"></i>Add another reminder
                            </button>
                        </div>

                        <!-- Privacy Settings -->
                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-2">
                                Privacy
                            </label>
                            <select id="privacy" name="privacy" class="form-input">
                                <option value="public">Public</option>
                                <option value="private" selected>Private</option>
                                <option value="confidential">Confidential</option>
                            </select>
                        </div>

                        <!-- Priority Level -->
                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-2">
                                Priority
                            </label>
                            <div class="flex items-center space-x-4">
                                <label class="flex items-center space-x-2">
                                    <input type="radio" name="priority" value="low" class="w-4 h-4 text-primary" />
                                    <span class="text-sm text-text-primary">Low</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="radio" name="priority" value="medium" checked class="w-4 h-4 text-primary" />
                                    <span class="text-sm text-text-primary">Medium</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="radio" name="priority" value="high" class="w-4 h-4 text-primary" />
                                    <span class="text-sm text-text-primary">High</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Form Actions -->
            <div class="flex flex-col sm:flex-row justify-between items-center gap-4 pt-6">
                <div class="flex items-center space-x-4">
                    <button type="button" onclick="saveAsDraft()" class="text-text-secondary hover:text-primary font-medium text-sm">
                        <i class="fas fa-save mr-2"></i>Save as Draft
                    </button>
                    <button type="button" onclick="previewEvent()" class="text-text-secondary hover:text-primary font-medium text-sm">
                        <i class="fas fa-eye mr-2"></i>Preview
                    </button>
                </div>

                <div class="flex items-center space-x-3">
                    <button type="button" onclick="cancelCreation()" class="btn-secondary">
                        <i class="fas fa-times mr-2"></i>Cancel
                    </button>
                    <button type="submit" id="createBtn" class="btn-primary" disabled>
                        <i class="fas fa-plus mr-2"></i>Create Event
                    </button>
                </div>
            </div>
        </form>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <div class="flex items-center space-x-3">
            <div class="flex-shrink-0">
                <i id="toastIcon" class="fas fa-check-circle text-success"></i>
            </div>
            <div>
                <p id="toastMessage" class="text-sm font-medium text-text-primary">Event created successfully!</p>
            </div>
            <button onclick="hideToast()" class="ml-auto text-text-secondary hover:text-text-primary">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Event Preview Modal -->
    <div id="previewModal" class="modal-overlay hidden" onclick="closePreviewModal(event)">
        <div class="modal-content max-w-lg" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold text-text-primary">Event Preview</h3>
                <button onclick="closePreviewModal()" class="text-text-secondary hover:text-text-primary">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="previewContent" class="space-y-3">
                <!-- Preview content will be populated here -->
            </div>
            <div class="flex justify-end space-x-3 pt-4 border-t border-slate-200">
                <button type="button" onclick="closePreviewModal()" class="btn-secondary">Close</button>
                <button type="button" onclick="createFromPreview()" class="btn-primary">Create Event</button>
            </div>
        </div>
    </div>

    <script>
        let currentMode = 'quick';
        let existingEvents = [
            { title: 'Team Meeting', start: '2025-09-30T09:30', end: '2025-09-30T10:30' },
            { title: 'Client Call', start: '2025-09-30T14:00', end: '2025-09-30T15:00' }
        ];

        // Mobile menu toggle
        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('hidden');
        }

        // Creation mode toggle
        function toggleCreationMode(mode) {
            currentMode = mode;
            const quickBtn = document.getElementById('quickModeBtn');
            const detailedBtn = document.getElementById('detailedModeBtn');
            const advancedOptions = document.getElementById('advancedOptions');

            // Reset button styles
            [quickBtn, detailedBtn].forEach(btn => {
                btn.classList.remove('active', 'bg-primary', 'text-white');
                btn.classList.add('text-text-secondary', 'hover:text-primary');
            });

            if (mode === 'quick') {
                quickBtn.classList.add('active', 'bg-primary', 'text-white');
                quickBtn.classList.remove('text-text-secondary', 'hover:text-primary');
                advancedOptions.classList.add('hidden');
            } else {
                detailedBtn.classList.add('active', 'bg-primary', 'text-white');
                detailedBtn.classList.remove('text-text-secondary', 'hover:text-primary');
                advancedOptions.classList.remove('hidden');
            }
        }

        // Category preview update
        function updateCategoryPreview() {
            const select = document.getElementById('eventCategory');
            const preview = document.getElementById('categoryPreview');
            const selectedOption = select.options[select.selectedIndex];
            const color = selectedOption.dataset.color;
            
            const colorMap = {
                'blue': 'bg-blue-500',
                'green': 'bg-green-500',
                'red': 'bg-red-500',
                'purple': 'bg-purple-500',
                'yellow': 'bg-yellow-500',
                'indigo': 'bg-indigo-500'
            };
            
            preview.className = `absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 rounded-full ${colorMap[color]}`;
        }

        // All day toggle
        function toggleAllDay() {
            const allDayCheckbox = document.getElementById('allDay');
            const startTime = document.getElementById('startTime');
            const endTime = document.getElementById('endTime');
            
            if (allDayCheckbox.checked) {
                startTime.disabled = true;
                endTime.disabled = true;
                startTime.value = '00:00';
                endTime.value = '23:59';
            } else {
                startTime.disabled = false;
                endTime.disabled = false;
                startTime.value = '09:00';
                endTime.value = '10:00';
            }
            
            checkConflicts();
        }

        // Recurrence options toggle
        function toggleRecurrenceOptions() {
            const select = document.getElementById('recurrencePattern');
            const endOptions = document.getElementById('recurrenceEnd');
            
            if (select.value !== 'none') {
                endOptions.classList.remove('hidden');
            } else {
                endOptions.classList.add('hidden');
            }
        }

        // Reminder management
        function addReminder() {
            const reminderList = document.getElementById('reminderList');
            const newReminder = document.createElement('div');
            newReminder.className = 'flex items-center space-x-2 reminder-item';
            newReminder.innerHTML = `
                <select class="form-input flex-1 text-sm">
                    <option value="15">15 minutes before</option>
                    <option value="30">30 minutes before</option>
                    <option value="60">1 hour before</option>
                    <option value="1440">1 day before</option>
                    <option value="10080">1 week before</option>
                </select>
                <button type="button" onclick="removeReminder(this)" class="p-2 text-error hover:bg-error-100 rounded-md transition-colors">
                    <i class="fas fa-trash text-sm"></i>
                </button>
            `;
            reminderList.appendChild(newReminder);
        }

        function removeReminder(button) {
            button.parentElement.remove();
        }

        // Conflict detection
        function checkConflicts() {
            const startDate = document.getElementById('startDate').value;
            const startTime = document.getElementById('startTime').value;
            const endDate = document.getElementById('endDate').value;
            const endTime = document.getElementById('endTime').value;
            
            if (!startDate || !startTime || !endDate || !endTime) return;
            
            const eventStart = new Date(`${startDate}T${startTime}`);
            const eventEnd = new Date(`${endDate}T${endTime}`);
            
            const conflicts = existingEvents.filter(event => {
                const existingStart = new Date(event.start);
                const existingEnd = new Date(event.end);
                
                return (eventStart < existingEnd && eventEnd > existingStart);
            });
            
            const conflictAlert = document.getElementById('conflictAlert');
            const conflictList = document.getElementById('conflictList');
            
            if (conflicts.length > 0) {
                conflictAlert.classList.remove('hidden');
                conflictList.innerHTML = conflicts.map(conflict => 
                    `<li>${conflict.title} (${new Date(conflict.start).toLocaleString()} - ${new Date(conflict.end).toLocaleString()})</li>`
                ).join('');
            } else {
                conflictAlert.classList.add('hidden');
            }
        }

        // Form validation
        function validateForm() {
            const title = document.getElementById('eventTitle').value.trim();
            const startDate = document.getElementById('startDate').value;
            const startTime = document.getElementById('startTime').value;
            const endDate = document.getElementById('endDate').value;
            const endTime = document.getElementById('endTime').value;
            
            const createBtn = document.getElementById('createBtn');
            const titleError = document.getElementById('titleError');
            const timeError = document.getElementById('timeError');
            
            let isValid = true;
            
            // Title validation
            if (!title) {
                titleError.classList.remove('hidden');
                isValid = false;
            } else {
                titleError.classList.add('hidden');
            }
            
            // Time validation
            if (startDate && startTime && endDate && endTime) {
                const start = new Date(`${startDate}T${startTime}`);
                const end = new Date(`${endDate}T${endTime}`);
                
                if (end <= start) {
                    timeError.classList.remove('hidden');
                    isValid = false;
                } else {
                    timeError.classList.add('hidden');
                }
            }
            
            createBtn.disabled = !isValid;
        }

        // Event creation
        function createEvent(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const eventData = Object.fromEntries(formData.entries());
            
            // Simulate event creation
            showToast('Event created successfully!', 'success');
            
            setTimeout(() => {
                window.location.href = 'calendar_dashboard.html';
            }, 1500);
        }

        // Draft saving
        function saveAsDraft() {
            showToast('Event saved as draft', 'info');
        }

        // Event preview
        function previewEvent() {
            const title = document.getElementById('eventTitle').value || 'Untitled Event';
            const startDate = document.getElementById('startDate').value;
            const startTime = document.getElementById('startTime').value;
            const endDate = document.getElementById('endDate').value;
            const endTime = document.getElementById('endTime').value;
            const category = document.getElementById('eventCategory').options[document.getElementById('eventCategory').selectedIndex].text;
            const location = document.getElementById('eventLocation').value;
            const description = document.getElementById('eventDescription').value;
            
            const previewContent = document.getElementById('previewContent');
            previewContent.innerHTML = `
                <div class="space-y-3">
                    <div>
                        <h4 class="font-medium text-text-primary">${title}</h4>
                        <p class="text-sm text-text-secondary">${category}</p>
                    </div>
                    <div class="flex items-center space-x-2 text-sm text-text-secondary">
                        <i class="fas fa-calendar"></i>
                        <span>${new Date(startDate).toLocaleDateString()} - ${new Date(endDate).toLocaleDateString()}</span>
                    </div>
                    <div class="flex items-center space-x-2 text-sm text-text-secondary">
                        <i class="fas fa-clock"></i>
                        <span>${startTime} - ${endTime}</span>
                    </div>
                    ${location ? `
                    <div class="flex items-center space-x-2 text-sm text-text-secondary">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>${location}</span>
                    </div>
                    ` : ''}
                    ${description ? `
                    <div class="text-sm text-text-secondary">
                        <p>${description}</p>
                    </div>
                    ` : ''}
                </div>
            `;
            
            document.getElementById('previewModal').classList.remove('hidden');
            setTimeout(() => {
                document.querySelector('#previewModal .modal-content').classList.add('show');
            }, 10);
        }

        function closePreviewModal(event) {
            if (event && event.target !== event.currentTarget) return;
            
            document.querySelector('#previewModal .modal-content').classList.remove('show');
            setTimeout(() => {
                document.getElementById('previewModal').classList.add('hidden');
            }, 300);
        }

        function createFromPreview() {
            closePreviewModal();
            document.getElementById('eventForm').dispatchEvent(new Event('submit'));
        }

        // Cancel creation
        function cancelCreation() {
            if (confirm('Are you sure you want to cancel? Any unsaved changes will be lost.')) {
                window.location.href = 'calendar_dashboard.html';
            }
        }

        // Toast notifications
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const icon = document.getElementById('toastIcon');
            const messageEl = document.getElementById('toastMessage');
            
            messageEl.textContent = message;
            
            icon.className = type === 'success' ? 'fas fa-check-circle text-success' :
                           type === 'error' ? 'fas fa-exclamation-circle text-error' :
                           'fas fa-info-circle text-accent';
            
            toast.classList.add('show');
            
            setTimeout(() => {
                hideToast();
            }, 3000);
        }

        function hideToast() {
            document.getElementById('toast').classList.remove('show');
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(event) {
            if (event.ctrlKey || event.metaKey) {
                switch(event.key) {
                    case 's':
                        event.preventDefault();
                        if (!document.getElementById('createBtn').disabled) {
                            document.getElementById('eventForm').dispatchEvent(new Event('submit'));
                        }
                        break;
                    case 'Escape':
                        event.preventDefault();
                        cancelCreation();
                        break;
                }
            }
        });

        // Initialize form
        document.addEventListener('DOMContentLoaded', function() {
            updateCategoryPreview();
            validateForm();
            
            // Set up form field listeners
            document.getElementById('eventTitle').addEventListener('input', validateForm);
            document.getElementById('startDate').addEventListener('change', validateForm);
            document.getElementById('startTime').addEventListener('change', validateForm);
            document.getElementById('endDate').addEventListener('change', validateForm);
            document.getElementById('endTime').addEventListener('change', validateForm);
        });
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>